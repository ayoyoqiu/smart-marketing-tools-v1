╔════════════════════════════════════════════════════════════════════════════╗
║              👥 四种用户角色功能对比（新增游客角色）                           ║
║                         v1.0.2-guest-user                                  ║
╚════════════════════════════════════════════════════════════════════════════╝

┌────────────────┬───────────┬───────────┬───────────┬─────────────────┐
│  功能/权限     │  游客用户 │ 普通用户  │  管理员   │ 超级管理员      │
│                │  (guest)  │  (user)   │  (admin)  │ (super_admin)   │
├────────────────┼───────────┼───────────┼───────────┼─────────────────┤
│ 📊 数据访问     │           │           │           │                 │
│  - 查看任务    │  仅自己的 │  仅自己的 │  所有数据 │   所有数据      │
│  - 查看地址    │  仅自己的 │  仅自己的 │  所有数据 │   所有数据      │
│  - 查看消息    │  仅自己的 │  仅自己的 │  所有数据 │   所有数据      │
├────────────────┼───────────┼───────────┼───────────┼─────────────────┤
│ 🎯 配置功能     │           │           │           │                 │
│  - 创建任务    │    ✅     │    ✅     │    ✅     │      ✅         │
│  - 添加地址    │    ✅     │    ✅     │    ✅     │      ✅         │
│  - 上传图片    │    ✅     │    ✅     │    ✅     │      ✅         │
│  - 创建分组    │    ✅     │    ✅     │    ✅     │      ✅         │
├────────────────┼───────────┼───────────┼───────────┼─────────────────┤
│ 📤 发送功能     │           │           │           │                 │
│  - 立即发送    │    ❌     │    ✅     │    ✅     │      ✅         │
│  - 定时发送    │    ❌     │    ✅     │    ✅     │      ✅         │
│  - 任务执行    │    ❌     │    ✅     │    ✅     │      ✅         │
├────────────────┼───────────┼───────────┼───────────┼─────────────────┤
│ 👑 管理功能     │           │           │           │                 │
│  - 管理面板    │    ❌     │    ❌     │    ✅     │      ✅         │
│  - 账号管理    │    ❌     │    ❌     │    ✅     │      ✅         │
│  - 用户升级    │    ❌     │    ❌     │    ✅     │      ✅         │
├────────────────┼───────────┼───────────┼───────────┼─────────────────┤
│ 🔄 角色切换     │    ❌     │    ❌     │ user↔admin│ user↔admin↔super│
├────────────────┼───────────┼───────────┼───────────┼─────────────────┤
│ 📝 注册默认     │ ✅ 是     │    否     │    否     │      否         │
└────────────────┴───────────┴───────────┴───────────┴─────────────────┘

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
🔐 角色升级路径
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

           【新用户注册】
                ↓
          guest (游客用户)
                ↓
          🎯 可以配置所有功能
          ❌ 但无法发送消息
                ↓
          【申请升级/管理员审核】
                ↓
          user (普通用户)
                ↓
          ✅ 开通发送权限
          ✅ 所有功能可用
                ↓
          【管理员提升】
                ↓
          admin/super_admin
          

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
🎭 游客用户核心特点
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

✅ 可以做的事情：
   • 完整浏览系统界面
   • 创建推送任务（但不能发送）
   • 添加Webhook地址
   • 上传图片生成链接
   • 创建分组和标签
   • 配置定时任务
   • 查看自己的历史记录

❌ 不能做的事情：
   • 立即发送消息
   • 定时发送消息
   • 执行已创建的任务
   • 查看其他用户数据
   • 访问管理面板

💡 设计目的：
   • 防止新用户滥用系统
   • 提供完整试用体验
   • 需要审核后才能发送
   • 降低垃圾信息风险

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
📋 典型使用流程
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

第1天：新用户张三注册
   → 自动获得guest角色
   → 登录系统，浏览界面
   → 创建Webhook地址
   → 创建推送任务
   → 点击"立即发送"
   → 🚫 提示"游客用户无法发送，请申请升级"

第2天：张三申请升级
   → 进入个人资料页面
   → 点击"申请升级为普通用户"
   → 填写申请原因（可选）
   → 提交申请

第3天：管理员审核
   → 管理员登录系统
   → 查看待审核用户列表
   → 查看张三的申请
   → 点击"批准升级"
   → 张三自动升级为user

第4天：张三正式使用
   → 登录后发现已升级
   → "立即发送"按钮可用
   → 成功发送消息
   → 定时任务自动执行

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
⚙️ 技术实现要点
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

1. 数据库层面：
   ✓ users表默认role改为'guest'
   ✓ 添加角色约束包含'guest'
   ✓ 创建升级记录表（可选）

2. 前端层面：
   ✓ 添加isGuest()判断函数
   ✓ 发送按钮禁用逻辑
   ✓ UI提示"游客模式"
   ✓ 添加升级申请入口

3. 后端层面：
   ✓ 发送API检查guest角色
   ✓ 定时任务跳过guest用户
   ✓ 添加升级API接口

4. 管理功能：
   ✓ 用户升级审核界面
   ✓ 批量升级功能
   ✓ 升级记录查询

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
💪 实施优势
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

✅ 技术可行性：改动清晰，风险低
✅ 产品价值：有效防止滥用，提升系统安全
✅ 用户体验：先试用后申请，降低学习成本
✅ 管理友好：分级管理，灵活控制
✅ 向后兼容：不影响现有用户

⏱️ 开发周期：1-2个工作日（6-10小时）
🎯 推荐指数：⭐⭐⭐⭐⭐ 强烈推荐

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

详细方案：GUEST_USER_FEATURE_PROPOSAL.md
当前版本：v1.0.1 (稳定版本)
目标版本：v1.0.2-guest-user
